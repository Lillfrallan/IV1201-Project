<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Recruitment</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<header th:replace="~{/fragments/header :: header}"></header>
<div class="container shadow p-3 mb-5 bg-white rounded">
    <!-- Header Section -->
    <h2 class="text-center mb-4">R e c r u i t m e n t </h2>
    <hr class="hr hr-blurry" />

    <!-- Competences Form -->
    <form th:action="@{/recruiter}" method="get">
        <label for="years">Competences:</label>
        <select name="competenceId" class="form-control">
            <option value="">Select Competence</option>
            <!-- Loop through competences -->
            <option th:each="competence : ${competences}"
                    th:value="${competence.competenceId}"
                    th:text="${competence.name}"
                    th:selected="${competence.competenceId == selectedCompetenceId}">
            </option>
        </select>
        <!-- Hidden field for selected competence ID -->
        <input type="hidden" th:if="${selectedCompetenceId}" th:attr="value=${selectedCompetenceId}" name="selectedCompetenceId" />
        <br>
        <!-- New filter for years of experience -->
        <label for="years">Years of Experience:</label>
        <select name="years" class="form-control">
            <!-- Default option for any years -->
            <option value="" th:selected="${selectedYears == null}">Any</option>
            <!-- Options for specific years -->
            <option value="1" th:selected="${selectedYears == 1}">1 Year(s)</option>
            <option value="2" th:selected="${selectedYears == 2}">2 Year(s)</option>
            <option value="3" th:selected="${selectedYears == 3}">3 Year(s)</option>
            <!-- Add more options as needed -->
        </select>
        <br>
        <!-- Submit button for filtering -->
        <div class="text-center">
            <button type="submit" class="btn btn-primary">Filter Profiles</button>
        </div>
    </form>
</div>


<!-- Display Competence Profiles -->
<div class="container shadow p-3 mb-5 bg-white rounded">
    <!-- Filtered Profiles Section -->
    <h3>Filtered Profiles</h3>
    <hr class="hr hr-blurry" />
    <!-- Table for displaying profiles -->
    <table class="table table-bordered table-sm table-hover">
        <!-- Table header -->
        <thead class="thead-dark">
        <tr>
            <th>First Name</th>
            <th>Surname</th>
            <th>Competence</th>
            <th>Years of Experience</th>
            <th>Action</th>
        </tr>
        </thead>
        <!-- Table body -->
        <tbody>
        <!-- Iterate through competence profiles -->
        <tr th:each="competenceProfile: ${profiles}" >
            <!-- Display profile details -->
            <td><span th:text="${competenceProfile.person.name}"></span></td>
            <td><span th:text="${competenceProfile.person.surname}"></span></td>
            <td><span th:text="${competenceProfile.competence.name}"></span></td>
            <td><span th:text="${competenceProfile.yearsOfExperience}"></span> year(s)</td>
            <!-- Select input for status -->
            <td class="text-center">
                <!-- Create a link or button that redirects to a new page with the competence profile ID -->
                <a th:href="@{/updateStatus/{profileId}(profileId=${competenceProfile.competenceProfileId})}">
                    <button type="button" class="btn btn-outline-secondary">Update Status</button>
                </a>

            </td>
        </tr>
        </tbody>
    </table>
</div>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>
